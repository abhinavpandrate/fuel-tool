<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>STYRKR — Fuel Tool</title>
  <style>
    /* ── REAL STYRKR FONT STACK ── */
    @font-face {
      font-family: "SuisseIntl";
      font-weight: 700;
      src: url('https://cdn.shopify.com/s/files/1/0551/0388/1250/files/SuisseIntl-Bold.woff2?v=1692899005') format('woff2'),
           url('https://cdn.shopify.com/s/files/1/0551/0388/1250/files/SuisseIntl-Bold.woff?v=1692899005') format('woff');
      font-display: swap;
    }
    @font-face {
      font-family: "SuisseIntl";
      font-weight: 600;
      src: url('https://cdn.shopify.com/s/files/1/0551/0388/1250/files/suisseintl-semibold.woff2?v=1741028257') format('woff2'),
           url('https://cdn.shopify.com/s/files/1/0551/0388/1250/files/suisseintl-semibold.woff?v=1741028257') format('woff');
      font-display: swap;
    }
    @font-face {
      font-family: "HelveticaNeue-Medium";
      font-weight: 400;
      src: url('https://cdn.shopify.com/s/files/1/0551/0388/1250/files/helveticaneue_8ffe98f1-45c2-4c14-8534-8f8833112ab4.woff2?v=1741027037') format('woff2'),
           url('https://cdn.shopify.com/s/files/1/0551/0388/1250/files/helveticaneue_7c531740-36ee-442a-ba1c-7ca72d5b1c78.woff?v=1741027037') format('woff');
      font-display: swap;
    }
    @font-face {
      font-family: "HelveticaNeue-Medium";
      font-weight: 500;
      src: url('https://cdn.shopify.com/s/files/1/0551/0388/1250/files/helveticaneue-medium.woff2?v=1692899005') format('woff2'),
           url('https://cdn.shopify.com/s/files/1/0551/0388/1250/files/helveticaneue-medium.woff?v=1692899005') format('woff');
      font-display: swap;
    }
    @font-face {
      font-family: "HelveticaNeue-Medium";
      font-weight: 600;
      src: url('https://cdn.shopify.com/s/files/1/0551/0388/1250/files/helveticaneue-bold.woff2?v=1692904131') format('woff2'),
           url('https://cdn.shopify.com/s/files/1/0551/0388/1250/files/helveticaneue-bold.woff?v=1692904131') format('woff');
      font-display: swap;
    }

    /* ── STYRKR DESIGN TOKENS ── */
    :root {
      --black: #1d1d1b;
      --white: #fefefe;
      --light-grey: #f8f8f8;
      --background-light-grey: #f6f6f6;
      --border-grey: #dadada;
      --mid-grey: #949494;
      --text-grey: #898989;
      --cream: #faf9f6;
      --styrkr-black: #1d1d1b;
      --styrkr-green: #4dcdc6;
      --styrkr-orange: #E97424;
      --sale: #E97424;

      --green: var(--styrkr-green);
      --orange: var(--styrkr-orange);
      --bg-grey: var(--background-light-grey);

      --font-head: "SuisseIntl", "Helvetica Neue", Helvetica, Arial, sans-serif;
      --font-body: "HelveticaNeue-Medium", "Helvetica Neue", Helvetica, Arial, sans-serif;
      --font-mono: ui-monospace, "SFMono-Regular", Menlo, Monaco, Consolas, monospace;

      --max: 1280px;
      --r-sm: 10px;
      --r-md: 16px;
      --r-lg: 30px;
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: var(--font-body);
      font-weight: 400;
      background: var(--white);
      color: var(--black);
      font-size: 15px;
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
    }

    a { color: var(--black); text-decoration: none; }
    a:hover { color: var(--green); }

    /* ── SITE HEADER ── */
    .site-header {
      background: var(--white);
      border-bottom: 1px solid var(--border-grey);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .site-header__inner {
      max-width: var(--max);
      margin: 0 auto;
      padding: 0 24px;
      height: 60px;
      display: flex;
      align-items: center;
      gap: 0;
    }
    .site-header__wordmark {
      font-family: var(--font-head);
      font-weight: 700;
      font-size: 22px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--black);
      margin-right: 28px;
      flex-shrink: 0;
    }
    .site-header__sep {
      width: 1px;
      height: 22px;
      background: var(--border-grey);
      margin-right: 24px;
    }
    .site-header__label {
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--mid-grey);
    }
    .site-header__nav {
      display: flex;
      gap: 2px;
      margin-left: auto;
      align-items: center;
    }
    .nav-tab {
      appearance: none;
      border: none;
      background: transparent;
      font-family: var(--font-body);
      font-size: 13px;
      font-weight: 500;
      letter-spacing: 0.06em;
      color: var(--mid-grey);
      padding: 8px 14px;
      border-radius: 999px;
      cursor: pointer;
      transition: color 140ms, background 140ms;
      text-transform: uppercase;
      white-space: nowrap;
    }
    .nav-tab:hover { color: var(--black); background: var(--bg-grey); }
    .nav-tab.is-active {
      background: var(--black);
      color: var(--white);
    }
    .nav-tab:disabled {
      opacity: 0.35;
      cursor: not-allowed;
    }
    .nav-tab:disabled:hover { background: transparent; color: var(--mid-grey); }
    .site-header__actions {
      display: flex;
      gap: 8px;
      margin-left: 20px;
    }

    /* ── HERO BAND ── */
    .page-hero {
      background: var(--bg-grey);
      border-bottom: 1px solid var(--border-grey);
      padding: 56px 24px 48px;
      text-align: center;
    }
    .page-hero__eyebrow {
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.20em;
      text-transform: uppercase;
      color: var(--mid-grey);
      margin-bottom: 14px;
    }
    .page-hero__title {
      font-family: var(--font-head);
      font-weight: 700;
      font-size: clamp(36px, 5vw, 58px);
      letter-spacing: -0.01em;
      text-transform: uppercase;
      color: var(--black);
      line-height: 1;
      margin-bottom: 18px;
    }
    .page-hero__title span { color: var(--green); }
    .page-hero__copy {
      font-size: 15px;
      line-height: 1.65;
      color: var(--text-grey);
      max-width: 52ch;
      margin: 0 auto;
    }

    /* ── BUTTONS ── */
    .button, button.button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-family: var(--font-body);
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      padding: 13px 22px;
      border-radius: 999px;
      border: 2px solid var(--black);
      background: var(--black);
      color: var(--white);
      cursor: pointer;
      transition: background 140ms, color 140ms, border-color 140ms;
      text-decoration: none;
      white-space: nowrap;
      appearance: none;
    }
    .button:hover, button.button:hover {
      background: var(--white);
      color: var(--black);
    }
    .button--outline {
      background: transparent;
      color: var(--black);
    }
    .button--outline:hover {
      background: var(--black);
      color: var(--white);
    }
    .button--green {
      background: var(--green);
      border-color: var(--green);
      color: var(--black);
    }
    .button--green:hover {
      background: transparent;
      color: var(--green);
    }
    .button--sm {
      font-size: 11px;
      padding: 9px 16px;
    }
    button:disabled, .button:disabled {
      opacity: 0.40;
      cursor: not-allowed;
      pointer-events: none;
    }

    /* ── LAYOUT ── */
    .page-content {
      max-width: var(--max);
      margin: 0 auto;
      padding: 40px 24px 80px;
    }
    .view { display: none; }
    .view.is-active { display: block; }

    .tool-grid {
      display: grid;
      grid-template-columns: 400px 1fr;
      gap: 24px;
      align-items: start;
    }
    @media (max-width: 960px) { .tool-grid { grid-template-columns: 1fr; } }

    /* ── CARD / PANEL ── */
    .card {
      border: 2px solid var(--black);
      border-radius: var(--r-lg);
      overflow: hidden;
      background: var(--white);
    }
    .card--grey { background: var(--bg-grey); }
    .card--soft { border-color: var(--border-grey); }
    .card__head {
      padding: 18px 24px 16px;
      border-bottom: 2px solid var(--black);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      background: var(--bg-grey);
    }
    .card--soft .card__head {
      border-bottom-color: var(--border-grey);
      background: var(--white);
    }
    .card__head h2 {
      font-family: var(--font-head);
      font-size: 13px;
      font-weight: 700;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--black);
      margin: 0;
    }
    .card__body { padding: 24px; }
    .card--sticky { position: relative; }
    @media (min-width: 960px) { .card--sticky { position: sticky; top: 72px; } }

    /* ── STEPPER ── */
    .stepper { display: flex; gap: 4px; flex-wrap: wrap; }
    .step-btn {
      appearance: none;
      border: 1.5px solid var(--border-grey);
      background: var(--white);
      color: var(--mid-grey);
      font-family: var(--font-body);
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.10em;
      text-transform: uppercase;
      padding: 7px 11px;
      border-radius: 999px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: all 140ms;
    }
    .step-btn .step-num {
      width: 18px; height: 18px; border-radius: 50%;
      border: 1.5px solid var(--border-grey);
      display: inline-flex; align-items: center; justify-content: center;
      font-size: 10px; font-family: var(--font-mono);
      background: var(--white); color: var(--black);
    }
    .step-btn:hover { border-color: var(--black); color: var(--black); }
    .step-btn.is-active { border-color: var(--black); background: var(--black); color: var(--white); }
    .step-btn.is-active .step-num { border-color: var(--white); background: transparent; color: var(--white); }

    /* ── FORMS ── */
    .form-grid { display: grid; gap: 18px; }
    .row-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    @media (max-width: 500px) { .row-2 { grid-template-columns: 1fr; } }
    .field label { display: block; font-size: 11px; font-weight: 600; letter-spacing: 0.14em; text-transform: uppercase; color: var(--mid-grey); margin-bottom: 8px; }
    input[type="text"], input[type="email"], input[type="number"], select {
      width: 100%; border: 1.5px solid var(--border-grey);
      background: var(--white); color: var(--black);
      font-family: var(--font-body); font-size: 14px; font-weight: 500;
      padding: 11px 14px; border-radius: var(--r-sm);
      outline: none; appearance: none; transition: border-color 140ms;
    }
    input:focus, select:focus { border-color: var(--black); }
    select { cursor: pointer; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath fill='%231d1d1b' d='M1 1l5 5 5-5'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 14px center; padding-right: 36px; }
    .help { margin-top: 7px; font-size: 12px; color: var(--text-grey); line-height: 1.5; }

    /* ── RANGE ── */
    .range-row { display: flex; gap: 14px; align-items: center; }
    input[type="range"] { flex: 1; height: 3px; border: none; padding: 0; border-radius: 0; background: var(--border-grey); accent-color: var(--black); cursor: pointer; }
    input[type="range"]:focus { border-color: transparent; box-shadow: none; }
    .range-val { font-family: var(--font-mono); font-size: 13px; font-weight: 600; color: var(--black); min-width: 44px; text-align: right; }

    /* ── CHOICE CARDS ── */
    .choice-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
    @media (max-width: 480px) { .choice-grid { grid-template-columns: 1fr; } }
    .choice-card {
      border: 1.5px solid var(--border-grey); border-radius: var(--r-md);
      padding: 14px; cursor: pointer; transition: border-color 140ms, background 140ms;
      background: var(--white);
    }
    .choice-card:hover { border-color: var(--black); }
    .choice-card.is-selected { border-color: var(--black); background: var(--bg-grey); }
    .choice-card__title { font-family: var(--font-head); font-size: 14px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.04em; color: var(--black); margin-bottom: 4px; }
    .choice-card.is-selected .choice-card__title { color: var(--green); }
    .choice-card__desc { font-size: 12px; color: var(--text-grey); line-height: 1.45; margin-bottom: 8px; }
    .choice-card__tags { display: flex; gap: 4px; flex-wrap: wrap; }
    .choice-card__tags span { font-size: 10px; font-weight: 600; letter-spacing: 0.08em; text-transform: uppercase; color: var(--mid-grey); border: 1px solid var(--border-grey); border-radius: 999px; padding: 3px 8px; }

    /* ── FORM ACTIONS ── */
    .form-actions { display: flex; justify-content: space-between; gap: 12px; margin-top: 24px; padding-top: 20px; border-top: 1px solid var(--border-grey); }

    /* ── STAT CARDS ── */
    .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 20px 24px; }
    .stat-card { border: 1.5px solid var(--border-grey); border-radius: var(--r-md); padding: 16px; background: var(--white); }
    .stat-card .k { font-size: 10px; font-weight: 700; letter-spacing: 0.16em; text-transform: uppercase; color: var(--mid-grey); margin-bottom: 6px; }
    .stat-card .v { font-family: var(--font-head); font-size: 30px; font-weight: 700; line-height: 1; color: var(--black); }
    .stat-card .v small { font-family: var(--font-body); font-size: 13px; font-weight: 500; color: var(--mid-grey); }
    .stat-card .n { margin-top: 6px; font-size: 11px; font-family: var(--font-mono); color: var(--text-grey); line-height: 1.5; }

    /* ── SECTIONS ── */
    .section-label { font-size: 11px; font-weight: 700; letter-spacing: 0.18em; text-transform: uppercase; color: var(--mid-grey); margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center; }
    .section { padding: 0 24px 20px; }
    .section:first-child { padding-top: 20px; }
    .section + .section { border-top: 1px solid var(--border-grey); padding-top: 20px; }
    .pane-title { font-family: var(--font-head); font-size: 22px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.02em; line-height: 1; color: var(--black); margin-bottom: 18px; }
    .pane-title span { color: var(--green); }

    /* ── TABLES ── */
    .tbl-wrap { border: 2px solid var(--black); border-radius: var(--r-lg); overflow: hidden; }
    table.tbl { width: 100%; border-collapse: initial; border-spacing: 0; font-size: 17px; box-shadow: none; }
    .tbl thead th { font-family: var(--font-head); font-size: 20px; font-weight: 700; text-align: left; padding: 14px 30px 12px 40px; background: var(--background-light-grey); border-bottom: 2px solid var(--black); text-transform: uppercase; letter-spacing: 0.06em; }
    .tbl tbody tr:nth-child(even) { background: var(--white); }
    .tbl tbody tr:nth-child(odd) { background: var(--background-light-grey); }
    .tbl td { padding: 10px 30px 10px 0; border-bottom: 1px solid var(--border-grey); vertical-align: middle; }
    .tbl td.tbl-time { width: 215px; padding-left: 0; padding-right: 40px; border-right: 4px solid var(--black); }
    .tbl td.tbl-time span { display: block; background: var(--black); color: var(--white); font-family: var(--font-head); font-weight: 700; font-size: 15px; letter-spacing: 0.10em; text-transform: uppercase; text-align: center; line-height: 37px; height: 37px; border-radius: 999px; }
    .tbl td.tbl-product { padding-left: 30px; }
    .tbl td.tbl-product a { color: var(--black); font-weight: 600; font-size: 15px; text-decoration: underline; text-underline-offset: 3px; }
    table.tbl-stats { width: 100%; border-collapse: initial; border-spacing: 0; font-size: 15px; border-top: 2px solid var(--black); }
    table.tbl-stats td { padding: 11px 18px; border-right: 1px solid var(--black); border-bottom: 1px solid var(--black); font-size: 14px; }
    .tbl-wrap-auto table.tbl, #productPlan table.tbl { width: 100%; border: 2px solid var(--black); border-radius: var(--r-lg); overflow: hidden; font-size: 17px; }
    #productPlan table.tbl:first-child { border-bottom-left-radius: 0; border-bottom-right-radius: 0; border-bottom: none; }
    #productPlan table.tbl-stats { border: 2px solid var(--black); border-top: none; border-radius: 0; border-bottom-left-radius: var(--r-lg); border-bottom-right-radius: var(--r-lg); overflow: hidden; width: 100%; }
    .tbl--compact .tbl-time span { line-height: 33px; height: 33px; font-size: 13px; }
    .tbl--compact .tbl-time { width: 100px; }
    .tbl--compact td { padding: 8px 18px 8px 0; font-size: 14px; }
    .num { text-align: right; font-family: var(--font-mono); font-size: 13px; }
    .dim { color: var(--text-grey); font-size: 12px; }

    /* ── NOTICES & EXTRAS ── */
    .notice { border: 1.5px solid var(--border-grey); background: var(--bg-grey); border-radius: var(--r-md); padding: 14px 16px; font-size: 13px; line-height: 1.6; color: var(--text-grey); }
    .notice strong { color: var(--black); }
    .notice--green { border-color: rgba(77,205,198,0.40); background: rgba(77,205,198,0.07); }
    .notice--warn { border-color: rgba(233,116,36,0.35); background: rgba(233,116,36,0.06); }
    .kbd { height: 1px; background: var(--border-grey); margin: 20px 0; }
    .card-preview { margin-top: 12px; border: 1.5px solid var(--border-grey); border-radius: var(--r-md); overflow: hidden; background: var(--bg-grey); }
    .card-preview img { width: 100%; height: auto; display: block; }
    .badge { display: inline-flex; align-items: center; gap: 6px; font-size: 11px; font-weight: 600; letter-spacing: 0.08em; color: var(--mid-grey); border: 1px solid var(--border-grey); border-radius: 999px; padding: 4px 10px; background: var(--white); }
    .badge strong { color: var(--black); font-family: var(--font-mono); }
    .cta-strip { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 16px; }

    /* ── PLAN LOCK ── */
    .plan-lock { position: relative; }
    .plan-lock__content { transition: filter 220ms, opacity 220ms; }
    .plan-lock__overlay { position: absolute; inset: 0; display: none; align-items: center; justify-content: center; padding: 24px; background: rgba(254,254,254,0.82); backdrop-filter: blur(4px); border-radius: 0 0 calc(var(--r-lg) - 2px) calc(var(--r-lg) - 2px); }
    .plan-lock__card { width: min(360px, 100%); border: 2px solid var(--black); border-radius: var(--r-lg); background: var(--white); padding: 28px; text-align: left; }
    .plan-lock__tag { display: inline-block; background: var(--black); color: var(--white); font-size: 10px; font-weight: 700; letter-spacing: 0.18em; text-transform: uppercase; padding: 4px 10px; border-radius: 999px; margin-bottom: 14px; }
    .plan-lock__title { font-family: var(--font-head); font-size: 26px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.01em; line-height: 1.05; color: var(--black); margin-bottom: 10px; }
    .plan-lock__text { font-size: 13px; line-height: 1.6; color: var(--text-grey); margin-bottom: 20px; }
    .plan-lock.is-locked .plan-lock__content { filter: blur(10px); opacity: 0.65; pointer-events: none; user-select: none; }
    .plan-lock.is-locked .plan-lock__overlay { display: flex; }

    /* ── THEMES ── */
    body.theme-dark { --white: #0d0d0d; --bg-grey: #111; --light-grey: #181818; --border-grey: #2a2a2a; --black: #f0f0f0; --mid-grey: #888; --text-grey: #666; }
  </style>
</head>
<body>

  <header class="site-header">
    <div class="site-header__inner">
      <div class="site-header__wordmark">STYRKR</div>
      <div class="site-header__sep"></div>
      <div class="site-header__label">Fuel Tool</div>

      <nav class="site-header__nav" role="tablist" aria-label="Tool views">
        <button class="nav-tab is-active" data-view="planner" role="tab">Planner</button>
        <button class="nav-tab" data-view="schedule" role="tab">Schedule</button>
        <button class="nav-tab" data-view="bundle" role="tab">Bundle Builder</button>
        <button class="nav-tab" data-view="faqs" role="tab">Notes</button>
      </nav>

      <div class="site-header__actions">
        <button class="button button--outline button--sm" id="themeToggle" type="button">Dark</button>
        <a class="button button--green button--sm" href="https://styrkr.com/collections/bundle-builder" target="_blank" rel="noreferrer">Shop bundles</a>
      </div>
    </div>
  </header>

  <section class="page-hero">
    <p class="page-hero__eyebrow">Carbs · Fluids · Sodium · Bundle pricing</p>
    <h1 class="page-hero__title">The <span>Fuel</span> Tool</h1>
    <p class="page-hero__copy">Build a product-specific fuelling plan from a few key inputs — then convert it into a STYRKR shopping list with bundle builder pack prices. All calculations run locally in your browser.</p>
  </section>

  <main class="page-content">

    <section class="view is-active" id="view-planner" role="tabpanel">
      <div class="tool-grid">

        <div class="card">
          <div class="card__head">
            <h2>Inputs</h2>
            <div class="stepper" aria-label="Planner steps">
              <button class="step-btn is-active" data-step="0" type="button"><span class="step-num">1</span> Session</button>
              <button class="step-btn" data-step="1" type="button"><span class="step-num">2</span> Sweat</button>
              <button class="step-btn" data-step="2" type="button"><span class="step-num">3</span> Fuel</button>
              <button class="step-btn" data-step="3" type="button"><span class="step-num">4</span> Output</button>
              <button class="step-btn" data-step="4" type="button"><span class="step-num">5</span> Details</button>
            </div>
          </div>
          <div class="card__body">
            <form id="plannerForm">

              <div class="step-pane is-active" data-step="0">
                <div class="form-grid">
                  <div class="pane-title">Your <span>session</span></div>
                  <div class="row-2">
                    <div class="field">
                      <label for="activity">Activity</label>
                      <select id="activity"></select>
                      <p class="help">Affects carb demand via activity multiplier.</p>
                    </div>
                    <div class="field">
                      <label for="durationH">Duration (hours)</label>
                      <input id="durationH" type="number" min="0.25" step="0.25" value="3" />
                      <p class="help">Use decimals — e.g. 2.5 = 2h 30m.</p>
                    </div>
                  </div>
                  <div class="field">
                    <label for="rpe">Intensity — RPE 1–10</label>
                    <div class="range-row">
                      <input id="rpe" type="range" min="1" max="10" step="0.5" value="6" />
                      <span class="range-val"><span id="rpeVal">6.0</span></span>
                    </div>
                    <p class="help">Scales your carb and fluid targets. Be honest — it changes the plan.</p>
                  </div>
                  <div class="field">
                    <label for="conditions">Conditions</label>
                    <select id="conditions"></select>
                    <p class="help">Adjusts fluid target (ml/h) up or down.</p>
                  </div>
                  <div class="field">
                    <label for="bottleSizeMl">Bottle size (ml)</label>
                    <select id="bottleSizeMl"></select>
                    <p class="help">Used for bottle counts and drink concentration in the Schedule tab.</p>
                  </div>
                </div>
              </div>

              <div class="step-pane" data-step="1">
                <div class="form-grid">
                  <div class="pane-title">Sweat <span>profile</span></div>
                  <div class="field">
                    <label for="sweatRate">Sweat rate</label>
                    <select id="sweatRate"></select>
                    <p class="help">If you have lab data, use that. Otherwise choose the best fit.</p>
                  </div>
                  <div class="field">
                    <label for="sweatSalt">Sweat saltiness</label>
                    <select id="sweatSalt"></select>
                    <p class="help">Estimates sodium concentration in sweat (mg/L).</p>
                  </div>
                  <div class="field">
                    <label for="sodiumRepl">Sodium replacement factor</label>
                    <div class="range-row">
                      <input id="sodiumRepl" type="range" min="0.30" max="0.80" step="0.05" value="0.50" />
                      <span class="range-val"><span id="sodiumReplVal">0.50</span></span>
                    </div>
                    <p class="help">Fraction of sodium loss to replace. Most athletes: 0.4–0.7.</p>
                  </div>
                </div>
              </div>

              <div class="step-pane" data-step="2">
                <div class="form-grid">
                  <div class="pane-title">Fuel <span>strategy</span></div>
                  <div class="row-2">
                    <div class="field">
                      <label for="carbMode">Carb mode</label>
                      <select id="carbMode"></select>
                      <p class="help"><span class="kbd">Standard</span> caps at 90 g/h. <span class="kbd">Advanced</span> allows 120 g/h.</p>
                    </div>
                    <div class="field">
                      <label for="caffeineProtocol">Caffeine protocol</label>
                      <select id="caffeineProtocol"></select>
                      <p class="help">Sets % of gels/drinks that are caffeinated.</p>
                    </div>
                  </div>
                  <div class="field" id="caffeineCustomWrap" style="display:none;">
                    <label for="caffeineCustom">Custom caffeine fraction</label>
                    <div class="range-row">
                      <input id="caffeineCustom" type="range" min="0" max="0.75" step="0.05" value="0.25" />
                      <span class="range-val"><span id="caffeineCustomVal">0.25</span></span>
                    </div>
                    <p class="help">0.25 ≈ "some", 0.50 ≈ "high".</p>
                  </div>
                  <div class="field">
                    <label>Plan style</label>
                    <div class="choice-grid" id="planStyleGrid"></div>
                    <p class="help">Controls carb split between drinks, gels and bars.</p>
                  </div>
                </div>
              </div>

              <div class="step-pane" data-step="3">
                <div class="form-grid">
                  <div class="pane-title">Plan <span>preview</span></div>
                  <div class="notice">
                    The right panel shows your per-hour targets, a product plan, and a bundle builder shopping list. If anything looks off, go back a step and adjust.
                  </div>
                  <div class="notice notice--warn">
                    <strong>Quick check:</strong> practise this plan in training before race day. Don't overdrink (hyponatremia risk), and don't push 120 g/h without gut training.
                  </div>
                </div>
              </div>

              <div class="step-pane" data-step="4">
                <div class="form-grid">
                  <div class="pane-title">Unlock <span>plan</span></div>
                  <div class="notice notice--green">
                    Enter your <strong>name</strong> and <strong>email</strong> to unlock the full plan summary, 30-minute schedule, fuel card export, and bundle builder tab.
                  </div>
                  <div class="row-2">
                    <div class="field">
                      <label for="leadName">Name</label>
                      <input id="leadName" type="text" autocomplete="name" placeholder="Your name" />
                    </div>
                    <div class="field">
                      <label for="leadEmail">Email</label>
                      <input id="leadEmail" type="email" autocomplete="email" placeholder="you@domain.com" />
                    </div>
                  </div>
                  <div id="leadError" class="notice notice--warn" style="display:none;"></div>
                  <p class="help">Prototype only: stored locally in your browser. When hosted, wire this to your email capture endpoint.</p>
                </div>
              </div>

              <div class="form-actions">
                <button class="button button--outline" id="prevBtn" type="button">← Back</button>
                <button class="button button--green" id="nextBtn" type="button">Next →</button>
              </div>
            </form>
          </div>
        </div>

        <div class="card card--soft card--sticky">
          <div class="card__head">
            <h2>Plan summary</h2>
            <div class="badge"><span>Engine</span> <strong>local</strong></div>
          </div>

          <div class="plan-lock is-locked" id="planLock">
            <div class="plan-lock__content" id="planLockContent">

              <div class="stat-grid" id="summaryCards"></div>

              <div class="section">
                <div class="section-label">Recommended products</div>
                <div id="productPlan"></div>
                <div id="productNotes" class="notice" style="display:none; margin-top:12px;"></div>
              </div>

              <div class="section">
                <div class="inline-row">
                  <div class="section-label" style="margin:0;">Bundle Builder packs &amp; pricing</div>
                  <label class="toggle-row">
                    <input type="checkbox" id="applyDiscount" checked />
                    <span>Subscribe &amp; Save (−25%)</span>
                  </label>
                </div>
                <div class="tbl-wrap-auto" id="bundlePlan"></div>
                <div class="cta-strip">
                  <a class="button button--green button--sm" id="openPrefillByobBtn" href="https://styrkr.com/products/build-your-own-bundle" target="_blank" rel="noreferrer">Open BYOB (prefilled)</a>
                  <button class="button button--outline button--sm" id="copyPrefillLinkBtn" type="button">Copy link</button>
                  <button class="button button--outline button--sm" id="addBundleToCartBtn" type="button">Add to cart</button>
                </div>
                <div id="prefillNote" class="notice" style="display:none; margin-top:10px;"></div>
                <div id="bundleNotes" class="notice" style="display:none; margin-top:10px;"></div>
              </div>

              <div class="section">
                <p class="help">Data source: <span class="kbd">Fueltool + bundle Builder v2.xlsx</span>. Prices shown in GBP (£).</p>
              </div>

            </div><div class="plan-lock__overlay" id="planLockOverlay" aria-hidden="false">
              <div class="plan-lock__card">
                <div class="plan-lock__tag">Step 5 required</div>
                <div class="plan-lock__title">Unlock your plan</div>
                <div class="plan-lock__text">Complete Step 5 — enter your name &amp; email — to view the full plan summary and unlock all tabs.</div>
                <button class="button button--green" id="goToDetailsBtn" type="button">Go to Step 5</button>
              </div>
            </div>
          </div></div>

      </div>
    </section>

    <section class="view" id="view-schedule" role="tabpanel">
      <div class="tool-grid">
        <div class="card">
          <div class="card__head">
            <h2>30-minute schedule</h2>
            <div class="badge"><span>Interval</span> <strong>30 min</strong></div>
          </div>
          <div class="card__body">
            <div class="form-grid">
              <div class="notice">
                Converts your per-hour plan into an <strong>every-30-minutes</strong> timeline, plus a bottle mixing guide. Update <strong>Bottle size</strong> in the Planner tab if needed.
              </div>
              <div>
                <div class="section-label">Bottle plan</div>
                <div id="bottlePlanOut"></div>
              </div>
              <div>
                <div class="inline-row">
                  <div class="section-label" style="margin:0;">Schedule</div>
                  <button class="button button--outline button--sm" id="copyScheduleBtn" type="button">Copy text</button>
                </div>
                <div id="scheduleOut"></div>
              </div>
              <p class="help">Tip: use the <span class="kbd">Fuel card</span> on the right for a printable 9:16 PNG — tape it to your stem or top tube.</p>
            </div>
          </div>
        </div>

        <div class="card card--soft card--sticky">
          <div class="card__head">
            <h2>Fuel card export</h2>
            <div class="badge"><span>Export</span> <strong>PNG 9:16</strong></div>
          </div>
          <div class="card__body">
            <div class="notice" style="margin-bottom:16px;">
              Generates a concise black/white card you can print and tape to your bike stem or top tube.
            </div>
            <div class="cta-strip" style="margin-bottom:14px;">
              <button class="button button--green" id="generateCardBtn" type="button">Generate PNG</button>
              <a class="button button--outline" id="downloadCardLink" href="#" download="styrkr-fuel-card.png" style="display:none;">Download</a>
            </div>
            <div class="card-preview">
              <img id="cardPreviewImg" alt="Fuel card preview" />
            </div>
            <p class="help" style="margin-top:10px;">For very long sessions the card auto-switches to a two-column schedule layout.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="view" id="view-bundle" role="tabpanel">
      <div class="tool-grid">
        <div class="card">
          <div class="card__head">
            <h2>30-day bundle inputs</h2>
            <div class="badge"><span>Uses</span> <strong>per-hour plan</strong></div>
          </div>
          <div class="card__body">
            <form id="bundleForm">
              <div class="form-grid">
                <div class="pane-title">Your <span>training block</span></div>
                <div class="row-2">
                  <div class="field">
                    <label for="sessions30d">Sessions / 30 days</label>
                    <input id="sessions30d" type="number" min="0" step="1" value="8" />
                    <p class="help">Sessions in a typical 30-day block.</p>
                  </div>
                  <div class="field">
                    <label for="avgSessionH">Avg duration (hours)</label>
                    <input id="avgSessionH" type="number" min="0.25" step="0.25" value="1.5" />
                    <p class="help">Average length of those sessions.</p>
                  </div>
                </div>
                <div class="field">
                  <label for="fuelledPct">Fuelled sessions %</label>
                  <div class="range-row">
                    <input id="fuelledPct" type="range" min="0" max="1" step="0.05" value="0.75" />
                    <span class="range-val"><span id="fuelledPctVal">0.75</span></span>
                  </div>
                  <p class="help">Not every session needs full fuelling. This scales your monthly bundle.</p>
                </div>
                <div class="notice">
                  Defaults pull from your <strong>Planner</strong> settings — carb target, sodium, caffeine, and plan style. Switch back to Planner to change those.
                </div>
                <label class="toggle-row">
                  <input type="checkbox" id="bundleDiscount" checked />
                  <span>Subscribe &amp; Save (−25%)</span>
                </label>
                <div id="bundle30Out"></div>
                <div class="cta-strip">
                  <a class="button button--green button--sm" id="openPrefillByobBtn30" href="https://styrkr.com/products/build-your-own-bundle" target="_blank" rel="noreferrer">Open BYOB (prefilled)</a>
                  <button class="button button--outline button--sm" id="addBundleToCartBtn30" type="button">Add to cart</button>
                </div>
                <div id="bundle30CtaNote" class="notice" style="display:none;"></div>
              </div>
            </form>
          </div>
        </div>

        <div class="card card--soft card--sticky">
          <div class="card__head">
            <h2>30-day shopping list</h2>
            <div class="badge"><span>Preview</span> <strong>packs</strong></div>
          </div>
          <div class="card__body">
            <div class="section-label">Bundle Builder packs &amp; pricing</div>
            <div class="tbl-wrap-auto" id="bundle30Packs"></div>
            <div id="bundle30Notes" class="notice" style="display:none; margin-top:10px;"></div>
            <p class="help" style="margin-top:12px;">Tip: if you don't meet the 4-item minimum, switch to a more varied plan style (Balanced / Adventure-led).</p>
          </div>
        </div>
      </div>
    </section>

    <section class="view" id="view-faqs" role="tabpanel">
      <div class="card card--soft" style="max-width:720px;">
        <div class="card__head"><h2>Notes &amp; model transparency</h2></div>
        <div class="card__body">
          <div class="form-grid">
            <div class="notice notice--warn">
              <strong>Disclaimer:</strong> This tool provides planning estimates only — not medical advice. Validate in training and adjust for temperature, altitude, gut tolerance, and race logistics.
            </div>
            <div>
              <div class="section-label">How the model works</div>
              <p style="font-size:13px; color:var(--text-grey); line-height:1.7; margin-bottom:10px;">Targets and product splits are driven by lookup tables and formulas from the spreadsheet. The planner:</p>
              <ul style="font-size:13px; color:var(--text-grey); line-height:1.9; padding-left:18px;">
                <li>Sets a carb target (g/h) from <span class="kbd">duration band</span> × <span class="kbd">RPE factor</span> × <span class="kbd">activity multiplier</span>, capped by carb mode.</li>
                <li>Sets a fluid target (ml/h) from <span class="kbd">sweat category</span> + <span class="kbd">conditions adj</span> + <span class="kbd">RPE adj</span>, clamped to 300–1200 ml/h.</li>
                <li>Sets a sodium target (mg/h) from fluid × sweat sodium × replacement factor.</li>
                <li>Builds a product plan from your selected style (mix / drink / gel / bar / balanced) and caffeine protocol.</li>
              </ul>
            </div>
            <div class="divider"></div>
            <div>
              <div class="section-label">Next build ideas</div>
              <ul style="font-size:13px; color:var(--text-grey); line-height:1.9; padding-left:18px;">
                <li>Measured sweat rate &amp; sodium inputs (lab or field test) with confidence ranges.</li>
                <li>Time-based schedule (every 15–30 min) + "carry plan" for pockets/bottles.</li>
                <li>Checkout integration for bundle builder SKUs.</li>
                <li>Multi-currency + region pack/pricing tables.</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>

  </main>

  <script src="data.js"></script>
  <script src="fuelling-guide.js"></script>

</body>
</html>
